<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <style>body {
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background-color: green;
}


div {
    background-image: url("https://img.freepik.com/free-psd/money-illustration-isolated_23-2151568546.jpg?semt=ais_hybrid&w=740&q=80");
    border: 2px solid black;
    width: 740px;
    padding-bottom: 20px;
    margin-top: 150px;
}

select {
    background-color: rgb(64, 164, 64);
    color: white;
}

button {
    background-color: rgb(230, 196, 44);
    border: 1px solid black;
}
h1:hover {
    color: blue;

}

p {
    font-style: italic;
}
#result {
    font-weight: bold;
    font-style: normal;
}
</style>

    <title>Document</title>
</head>
<body>
    <div id="container">
        <h1>Currency Converter:</h1>

        <p>FROM:</p>
        <select id="select1"></select>
        <p>TO:</p>
        <select id="select2"></select>
        <p>AMOUNT:</p>
        <input id="amount">
        <button id="button">CONVERT</button>
        <p id="result">...</p>
        <button id="switch">SWITCH</button>
    </div>
    
</body>
<script src="daily_challenge.js">
    async function selectCurrency() {
    let select1 = document.getElementById("select1")
    let select2 = document.getElementById("select2")

    try {
        let response = await fetch("https://v6.exchangerate-api.com/v6/634195765be1079339ae206a/latest/USD")
        let data = await response.json()

        let currencies = Object.keys(data.conversion_rates)

        currencies.forEach(currency => {
            let option1 = document.createElement("option")
            option1.textContent = currency
            option1.value = currency
            select1.appendChild(option1)
        })

         currencies.forEach(currency => {
            let option2 = document.createElement("option")
            option2.textContent = currency
            option2.value = currency
            select2.appendChild(option2)
        })

    } catch(error) {
        console.error("Something went wrong:", error)
    }
}

selectCurrency()

async function convertCurrencies() {
    let from = document.getElementById("select1").value
    let to = document.getElementById("select2").value
    let amount = parseFloat(document.getElementById("amount").value)
    let result = document.getElementById("result")

    if (isNaN(amount)) {
        result.textContent = "Please enter a number"
        return
    }

    try {
        let response = await fetch(`https://v6.exchangerate-api.com/v6/634195765be1079339ae206a/pair/${from}/${to}/${amount}`)
        let data = await response.json()
        
        if (data.result === "success") {
            result.textContent = `${amount} ${from} = ${data.conversion_result.toFixed(2)} ${to}`
        } else {
            console.error("Something went wrong:", data)
        }

    } catch(error) {
        console.error("Something went wrong:", error)
    }

    
}

async function switchCurrencies() {
    let from = document.getElementById("select2").value
    let to = document.getElementById("select1").value
    let amount = parseFloat(document.getElementById("amount").value)
    let result = document.getElementById("result")

    if (isNaN(amount)) {
        result.textContent = "Please enter a number"
        return
    }

    try {
        let response = await fetch(`https://v6.exchangerate-api.com/v6/634195765be1079339ae206a/pair/${from}/${to}/${amount}`)
        let data = await response.json()
        
        if (data.result === "success") {
            result.textContent = `${amount} ${from} = ${data.conversion_result.toFixed(2)} ${to}`
        } else {
            console.error("Something went wrong:", data)
        }

    } catch(error) {
        console.error("Something went wrong:", error)
    }

    
}

const convertButton = document.getElementById("button")

convertButton.addEventListener("click", () => {
    convertCurrencies()

})

const switchButton = document.getElementById("switch")

switchButton.addEventListener("click", () => {
    if (convertCurrencies()) {
        switchCurrencies()
    } else {
        convertCurrencies()
    }

})



</script>
</html>