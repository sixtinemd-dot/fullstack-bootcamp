<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <style>
        body {
    background-image: url(https://i.giphy.com/media/TxVVB6PfWMjE4/200.webp);
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: white;
}

.infos{
    margin: 0 auto;
    width: 400px;
    border: 2px solid yellow;

}

#button{
    border: 2px solid yellow;
    border-radius: 10px;
    background-color: black;
    transition: color 0.3s, background-color 0.3s;
    color: white;
    padding: 10px;
    margin: 25px;
}

#button:hover{
    color: yellow;
}

p:hover{
    color: yellow;
}

h2:hover{
    color: blue;
    font-weight: bolder;
}

.loading{
    margin: 20px;
}

img:hover {
    padding:0%;
    margin: 20px;
    box-shadow: 0 0 20px 5px yellow; 
    transform: scale(1.05); 
}
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <title>Star-Wars mini-project</title>

</head>
<body>
    <img src="https://upload.wikimedia.org/wikipedia/commons/5/5a/Star_Wars_Logo..png" height="200px">
    <div id="container"></div>

    <button id="button">Find Someone</button>
</body>
<script src="mini_project.js">
let container = document.getElementById("container")
const button = document.getElementById("button")

function showLoading() {

    let loading = document.createElement("div")
    loading.classList.add("loading")
    container.appendChild(loading)
    loading.innerHTML = 
    '<i class="fa-solid fa-rotate fa-spin fa-2xl"></i><h4>Loading...</h4>'
   
}

function addChar(properties, home) {
    container.innerHTML=""

    let char = document.createElement("div")
    char.classList.add("infos")
    char.innerHTML =
    `<h2>${properties.name}</h2>

    <p>Height: ${properties.height}</p>
    <p>Gender: ${properties.gender}</p>
    <p>Birth Year: ${properties.birth_year}</p>
    <p>Home World: ${home}</p>
    </div>`

    container.appendChild(char)
}

button.addEventListener("click", () => {
    
    showLoading()

    let randomNum = Math.floor(Math.random() * 83) + 1
    let charUrl = `https://www.swapi.tech/api/people/${randomNum}`

    fetch(charUrl)
        .then(response => {
            if (!response.ok) {
            throw new Error(`error!: ${response.status}`)
        }
        return response.json()
    })

    .then(data => {
    let properties = data.result.properties
    return Promise.all([
        properties,
        fetch(properties.homeworld) 
            .then(response => {
            if (!response.ok) {
            throw new Error(`error!: ${response.status}`)
        }
        return response.json()            
        })
    ])
    })
        
    .then(([properties, home]) => {
        addChar(properties, home.result.properties.name)
    })

    .catch(error => console.error("Something went wrong:", error))


})
</script>
</html>